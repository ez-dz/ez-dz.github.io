<!DOCTYPE html>
<html>
<head>
<title>Trumpet Scale</title>
</head>
<body>
<center>
<h1> Trumpet C Scale </h1>

<img src = "" id="notePic">
<br>
<table>
    <tr>
        <td>
        <button type="button" onclick="get_sound()">Play Note</button>
        </td>
        <td>
        <iframe id="player" width="20" height="20"></iframe>
        </td>
    </tr>
    <tr>
        <td>
        <label for="note_menu">Guess the Note:</label>
        </td>
        <td>
        <select name="note_menu" id="note_menu">
            <option value="a">a</option>
            <option value="b">b</option>
            <option value="c">c</option>
            <option value="d">d</option>
            <option value="d">e</option>
            <option value="d">f</option>
            <option value="d">g</option>
            <option value="d">c5</option>
        </select>
        </td>
    </tr>
    <tr>
        <td>
        <label for="finger_menu">Guess the Fingers:</label>
        </td>
        <td>
        <select name="finger_menu" id="finger_menu">
            <option value="a">0</option>
            <option value="b">1</option>
            <option value="c">12</option>
            <option value="d">13</option>
            <option value="d">2</option>
        </select>
        </td>
    </tr>
    <tr>
        <td>
        <button type="button" onclick="test_results()">Check Results</button>
        </td>
    </tr>
</table>

<script>

//C note scale
var notes = ["c", "d", "e", "f", "g", "a", "b", "c5"];
var fingers = ["0", "13", "12", "1", "0", "12", "2", "0"]
var times = [[89,92],[93,95],[96,98],[99,102],[103,105],[106,109],[110,112],[113,116]]


//Random note image
var index = Math.floor(Math.random() * notes.length)

function get_image(){
    document.getElementById("notePic").src = "images/"+notes[index]+".png";
}

function get_sound(){
    video_url = 'https://www.youtube.com/embed/XFSKGpUfcuc?autoplay=1&controls=0&start='+times[index][0]+'&end='+times[index][1];
    document.getElementById("player").src=video_url;
}

get_image();

var score = 0
var turns = 8
var turn = 0

//Check the score
function test_results(){
    note_menu = document.getElementById("note_menu");
    finger_menu = document.getElementById("finger_menu");
    var note_guess = note_menu.options[note_menu.selectedIndex].text;
    var finger_guess = finger_menu.options[finger_menu.selectedIndex].text;
    if (note_guess == notes[index] && finger_guess != fingers[index]){
        alert("Note correct but fingers are wrong");
    }
    if (note_guess != notes[index] && finger_guess == fingers[index]){
        alert("Note is wrong but fingers are correct");
    }
	if (note_guess == notes[index] && finger_guess == fingers[index]){
        alert("Correct!");
    	score = score+1;

        index = Math.floor(Math.random() * notes.length);
        get_image();
    }
    else{
        alert("Try again");
    }
    turn = turn+1;

    if (turn>=turns){
     alert("Game Over! \n Your Score "+score+"/"+turns)
     location.reload();
    }
}

</script>
</center>
</body>
</html> 
